{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h2>{% if request_type %}Edit{% else %}Add{% endif %} Request Type</h2>
    <form method="post" class="mt-3">
        {% csrf_token %}
        <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" id="name" name="name" 
                   value="{% if request_type %}{{ request_type.name }}{% endif %}">
        </div>

        <div class="mb-3">
            <label for="request_family" class="form-label">Request Family</label>
            <select name="request_family" id="request_family" class="form-select">
                <option value="">--Select--</option>
                {% for f in request_families %}
                    <option value="{{ f.request_family_id }}"
                        {% if request_type and request_type.request_family_id == f.request_family_id %}selected{% endif %}>
                        {{ f.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="work_family" class="form-label">Work Family</label>
            <select name="work_family" id="work_family" class="form-select">
                <option value="">--Select--</option>
                {% for w in work_families %}
                    <option value="{{ w.work_family_id }}"
                        {% if request_type and request_type.work_family_id == w.work_family_id %}selected{% endif %}>
                        {{ w.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="workflow" class="form-label">Workflow</label>
            <select name="workflow" id="workflow" class="form-select">
                <option value="">--Select--</option>
                {% for wf in workflows %}
                    <option value="{{ wf.workflow_id }}"
                        {% if request_type and request_type.workflow_id == wf.workflow_id %}selected{% endif %}>
                        {{ wf.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" id="active" name="active" 
                {% if request_type and request_type.active %}checked{% endif %}>
            <label class="form-check-label" for="active">Active</label>
        </div>

        <button type="submit" class="btn btn-success">{% if request_type %}Update{% else %}Save{% endif %}</button>
        <a href="{% url 'request_types_list' %}" class="btn btn-secondary">Cancel</a>
    </form>
</div>
{% endblock %}
